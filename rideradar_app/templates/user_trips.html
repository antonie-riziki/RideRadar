

{% load static %}

<!DOCTYPE html>
<html class="light" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Trips - RideRadar</title>

  <!-- External Stylesheets -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet" />

  <!-- Tailwind Configuration -->
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#2b8dee",
            "background-light": "#f6f7f8",
            "background-dark": "#101922",
          },
          fontFamily: {
            "display": ["Plus Jakarta Sans", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "1rem",
            "lg": "2rem",
            "xl": "3rem",
            "full": "9999px"
          },
        },
      },
    }
  </script>

  <!-- Global Styles -->
  <style type="text/tailwindcss">
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
    }

    .sidebar-item-active {
      @apply bg-primary/10 text-primary;
    }

    .donut-chart {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: conic-gradient(#2b8dee var(--percentage), #e2e8f0 0);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 4px 12px rgba(43, 141, 238, 0.2);
    }

    .donut-chart::after {
      content: '';
      position: absolute;
      width: 88px;
      height: 88px;
      border-radius: 50%;
      background: inherit;
      filter: invert(1);
    }

    .dark .donut-chart::after {
      background: #101922;
    }

    .donut-center {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
  </style>

  <style>
    body {
      min-height: 100vh;
      overflow: hidden;
    }

    main {
      width: 100%;
      margin-left: 96px;
      margin-top: 64px;
      height: calc(100vh - 64px);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-[#0d141b] dark:text-white antialiased overflow-hidden h-screen flex">
  
  {% include 'user_sidebar.html' %}

  <!-- Main Content Area -->
  <main class="flex-1 relative flex flex-col items-center justify-start overflow-y-auto ml-24 mt-16 w-full pb-32">

    <!-- Header -->
    <div class="w-full max-w-4xl mx-auto px-4 pt-8 pb-4">
      <h1 class="text-3xl font-bold tracking-tight">My Trips</h1>
      <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">Active trips and booking history</p>
    </div>

    <!-- Active Trips Section -->
    <div class="w-full max-w-4xl mx-auto px-4 mb-8">
      <h2 class="text-sm font-bold text-slate-600 dark:text-slate-300 uppercase tracking-widest mb-4">Active Trips</h2>
      
      <!-- Active Trip Card -->
      <div class="bg-white dark:bg-background-dark rounded-3xl shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden mb-4">
        <div class="p-6">
          <!-- Header with Status Badge -->
          <div class="flex items-start justify-between mb-6">
            <div>
              <h3 class="text-lg font-bold mb-1">Route 45 - Kahawa West</h3>
              <p class="text-sm text-slate-500 dark:text-slate-400">Vehicle KDB 883Z</p>
            </div>
            <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 text-xs font-bold rounded-full">
              <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
              In Progress
            </span>
          </div>

          <!-- Donut Chart Section -->
          <div class="flex flex-col sm:flex-row items-center justify-between mb-6 gap-6">
            <!-- Donut Chart -->
            <div class="flex flex-col items-center" style="margin: 20px;">
              <svg class="w-32 h-32" viewBox="0 0 120 120" >
                <!-- Background Circle -->
                <circle cx="60" cy="60" r="56" fill="none" stroke="currentColor" stroke-width="12" class="text-slate-200 dark:text-slate-700" opacity="0.3"/>
                <!-- Progress Circle (15 out of 20 mins = 75%) -->
                <circle cx="60" cy="60" r="56" fill="none" stroke="currentColor" stroke-width="12" class="text-primary" stroke-dasharray="264 352" stroke-linecap="round" transform="rotate(-90 60 60)"/>
              </svg>
              <div class="absolute flex flex-col items-center mt-1" style="padding-top: 30px;">
                <span class="text-2xl font-bold">5</span>
                <span class="text-xs text-slate-500 dark:text-slate-400 font-semibold">mins</span>
              </div>
            </div>

            <!-- Trip Details Grid -->
            <div class="flex-1 grid grid-cols-2 gap-4">
              <!-- Current Stop -->
              <div class="bg-slate-50 dark:bg-slate-800/40 p-4 rounded-2xl border border-slate-100 dark:border-slate-800/50">
                <p class="text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400 font-bold mb-2">Current Stop</p>
                <p class="font-bold text-sm">Prestige Plaza</p>
                <p class="text-xs text-slate-500 dark:text-slate-400 mt-1">500m away</p>
              </div>

              <!-- Occupancy -->
              <div class="bg-slate-50 dark:bg-slate-800/40 p-4 rounded-2xl border border-slate-100 dark:border-slate-800/50">
                <p class="text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400 font-bold mb-2">Occupancy</p>
                <div class="flex items-center gap-2">
                  <span class="material-symbols-outlined text-amber-500">group</span>
                  <p class="font-bold text-sm">Full</p>
                </div>
              </div>

              <!-- Fare -->
              <div class="bg-slate-50 dark:bg-slate-800/40 p-4 rounded-2xl border border-slate-100 dark:border-slate-800/50">
                <p class="text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400 font-bold mb-2">Fare</p>
                <p class="font-bold text-primary text-sm">60 KES</p>
              </div>

              <!-- Payment Status -->
              <div class="bg-slate-50 dark:bg-slate-800/40 p-4 rounded-2xl border border-slate-100 dark:border-slate-800/50">
                <p class="text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400 font-bold mb-2">Payment</p>
                <p class="font-bold text-emerald-600 dark:text-emerald-400 text-sm">Paid</p>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="flex gap-3">
            <a href="/user/live-tracking" class="flex-1 bg-primary hover:bg-primary/90 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2">
              <span class="material-symbols-outlined">location_on</span>
              Live Tracking
            </a>
            <button class="flex-1 border border-red-200 dark:border-red-900/40 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-700 dark:text-red-400 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2">
              <span class="material-symbols-outlined">cancel</span>
              Cancel Trip
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Trip History Section -->
    <div class="w-full max-w-4xl mx-auto px-4 mb-8">
      <h2 class="text-sm font-bold text-slate-600 dark:text-slate-300 uppercase tracking-widest mb-4">Recent Trips</h2>
      
      <!-- Trip History Items -->
      <div class="space-y-3">
        <!-- Completed Trip 1 -->
        <div class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 p-4 hover:shadow-md transition-shadow">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <span class="material-symbols-outlined text-emerald-600 dark:text-emerald-400">check_circle</span>
                <h4 class="font-bold text-sm">Route 46 - CBD ‚Üí Westlands</h4>
              </div>
              <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">Vehicle KCA 123X ‚Ä¢ 24 Jan 2026, 5:45 PM</p>
              <div class="flex items-center gap-3 text-xs text-slate-600 dark:text-slate-300">
                <span>‚è± 42 mins</span>
                <span>‚Ä¢</span>
                <span>üöê 26 seats</span>
              </div>
            </div>
            <div class="text-right">
              <p class="font-bold text-sm">50 KES</p>
              <p class="text-xs text-emerald-600 dark:text-emerald-400 font-semibold">Completed</p>
            </div>
          </div>
        </div>

        <!-- Completed Trip 2 -->
        <div class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 p-4 hover:shadow-md transition-shadow">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <span class="material-symbols-outlined text-emerald-600 dark:text-emerald-400">check_circle</span>
                <h4 class="font-bold text-sm">Route 5 - Karen ‚Üí CBD</h4>
              </div>
              <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">Vehicle KCC 789Z ‚Ä¢ 23 Jan 2026, 4:20 PM</p>
              <div class="flex items-center gap-3 text-xs text-slate-600 dark:text-slate-300">
                <span>‚è± 55 mins</span>
                <span>‚Ä¢</span>
                <span>üöê 26 seats</span>
              </div>
            </div>
            <div class="text-right">
              <p class="font-bold text-sm">100 KES</p>
              <p class="text-xs text-emerald-600 dark:text-emerald-400 font-semibold">Completed</p>
            </div>
          </div>
        </div>

        <!-- Completed Trip 3 -->
        <div class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 p-4 hover:shadow-md transition-shadow">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <span class="material-symbols-outlined text-emerald-600 dark:text-emerald-400">check_circle</span>
                <h4 class="font-bold text-sm">Route 23 - Upper Hill ‚Üí CBD</h4>
              </div>
              <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">Vehicle KCB 445Y ‚Ä¢ 22 Jan 2026, 8:10 AM</p>
              <div class="flex items-center gap-3 text-xs text-slate-600 dark:text-slate-300">
                <span>‚è± 35 mins</span>
                <span>‚Ä¢</span>
                <span>üöê 26 seats</span>
              </div>
            </div>
            <div class="text-right">
              <p class="font-bold text-sm">40 KES</p>
              <p class="text-xs text-emerald-600 dark:text-emerald-400 font-semibold">Completed</p>
            </div>
          </div>
        </div>

        <!-- Cancelled Trip -->
        <div class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 p-4 hover:shadow-md transition-shadow opacity-75">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <span class="material-symbols-outlined text-slate-400">cancel</span>
                <h4 class="font-bold text-sm text-slate-600 dark:text-slate-400">Route 12 - Nairobi West ‚Üí CBD</h4>
              </div>
              <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">Vehicle KCD 567M ‚Ä¢ 21 Jan 2026, 6:30 PM</p>
              <div class="flex items-center gap-3 text-xs text-slate-600 dark:text-slate-300">
                <span>üö´ Cancelled by user</span>
              </div>
            </div>
            <div class="text-right">
              <p class="font-bold text-sm text-slate-500">-- KES</p>
              <p class="text-xs text-slate-500 dark:text-slate-400 font-semibold">Refunded</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- View All History Button -->
    <div class="w-full max-w-4xl mx-auto px-4 pb-8">
      <button class="w-full py-3 px-4 border border-slate-200 dark:border-slate-700 rounded-2xl text-slate-700 dark:text-slate-300 font-bold hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors flex items-center justify-center gap-2">
        <span class="material-symbols-outlined">history</span>
        View Full History
      </button>
    </div>

  </main>

  <!-- User Sidebar -->
  {% include 'user_sidebar.html' %}

</body>
</html>